# ‚ö° fast-short-url

–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π, –±—ã—Å—Ç—Ä—ã–π –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫ –Ω–∞ **FastAPI + PostgreSQL + SQLAlchemy 2.x**.

–ë–µ–∑ –ª–∏—à–Ω–µ–π –º–∞–≥–∏–∏. –ë–µ–∑ legacy. –¢–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîó –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ URL
- ‚è≥ TTL (–≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å—Å—ã–ª–æ–∫)
- üìä –°—á—ë—Ç—á–∏–∫ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- üßπ –§–æ–Ω–æ–≤–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç—ë–∫—à–∏—Ö —Å—Å—ã–ª–æ–∫


## üß± –°—Ç–µ–∫

- **Python 3.14**
- **FastAPI**
- **SQLAlchemy 2.x**
- **PostgreSQL**
- **Alembic**
- **Pydantic v2**
- **uv** (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏)

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone https://github.com/1ns0mn1a7/fast-short-url.git
cd fast-short-url
```

### –°–æ–∑–¥–∞—ë–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ uv
```bash
uv venv
source .venv/bin/activate
```

### –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
uv pip install .[dev]
```
–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ `pyproject.toml`
`dev` –≤–∫–ª—é—á–∞–µ—Ç —Ç–µ—Å—Ç—ã, –ª–∏–Ω—Ç–µ—Ä –∏ dev-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ **Pydantic Settings**.

`ENV`
```env
DATABASE_URL=postgresql+psycopg://admin:password@localhost:5432/shortener
DEBUG=true
```

`app/config.py` —É–∂–µ –≤—Å—ë –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞—Ç—å –ë–î:
```sql
CREATE DATABASE shortener;
```

–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
alembic upgrade head
```

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫
```bash
fastapi dev app/main.py
```
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

- Swagger ‚Üí http://127.0.0.1:8000/docs
- OpenAPI ‚Üí http://127.0.0.1:8000/openapi.json

## API

### –°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–æ—Ç–∫—É—é —Å—Å—ã–ª–∫—É

`POST /shorten`

```json
{
  "url": "https://example.com"
}
```

–û—Ç–≤–µ—Ç:
```json
{
  "short_url": "aB9xQ2"
}
```

### –†–µ–¥–∏—Ä–µ–∫—Ç

`GET /{code}`

- `307` Temporary Redirect
- `404`, –µ—Å–ª–∏ —Å—Å—ã–ª–∫–∞ –∏—Å—Ç–µ–∫–ª–∞ –∏–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

`GET /{code}/stats`

–û—Ç–≤–µ—Ç:

```json
{
  "code": "aB9xQ2",
  "clicks": 42
}
```

## üßπ –û—á–∏—Å—Ç–∫–∞ —Å—Å—ã–ª–æ–∫ —Å –∏—Å—Ç–µ—á–µ–Ω–Ω—ã–º —Å—Ä–æ–∫–æ–º

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `BackgroundTasks`
- –£–¥–∞–ª—è–µ—Ç –≤—Å–µ —Å—Å—ã–ª–∫–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö `expires_at < now(UTC)`

```python
service.cleanup_expired_links()
```


# üñ• Frontend (Terminal UI)

Frontend - —ç—Ç–æ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω–Ω—ã–π DOS/CLI, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä—è–º–æ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞.

–ê –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π terminal-style Web UI, –≥–¥–µ –≤—Å—ë —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞–º–∏.

## üéÆ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚å®Ô∏è –í–≤–æ–¥ –∫–æ–º–∞–Ω–¥ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- üß† –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–∞–Ω–¥ (‚Üë / ‚Üì)
- üîó –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏
- üìã –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- ‚è≥ –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—á–∞—Ç–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∏
- üê± Pixel-cat
- üîå –ü—Ä—è–º–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å backend API

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

```bash
cd frontend
npm install
npm run dev
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:
```
http://localhost:5173
```

Frontend –æ–∂–∏–¥–∞–µ—Ç backend API –ø–æ –∞–¥—Ä–µ—Å—É, —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ api.ts.